
<blockquote>
  <p>You&#8217;ll find the complete code of this chapter in <a href="https://github.com/Jeiwan/uniswapv3-code/tree/milestone_2">this Github branch</a>.</p>

  <p>This milestone introduces a lot of code changes in existing contracts. <a href="https://github.com/Jeiwan/uniswapv3-code/compare/milestone_1...milestone_2">Here you can see all changes since the last milestone</a></p>
</blockquote>

<h1 id="second-swap">Second Swap</h1>

<p>Alright, this is where it gets real. So far, our implementation has been looking too synthetic and static. We have
calculated and hard coded all the amounts to make the learning curve less steep, and now we&#8217;re ready to make it dynamic.
We&#8217;re going to implement the second swap, that is a swap in the opposite direction: sell ETH to buy USDC. To do this,
we&#8217;re going to improve our smart contracts significantly:</p>
<ol>
  <li>We need to implement math calculations in Solidity. However, since implementing math in Solidity is tricky due to
Solidity supporting only integer division, we&#8217;ll use third-party libraries.</li>
  <li>We&#8217;ll need to let users choose a swap direction, and the pool contract will need to support swapping in either
direction. We&#8217;ll improve the contract and will bring it closer to multi-range swaps, which we&#8217;ll implement in the next
milestone.</li>
  <li>Finally, we&#8217;ll update the UI to support swaps in both directions AND out amount calculation! This will require us
implementing another contract, Quoter.</li>
</ol>

<p>In the end of this milestone, we&#8217;ll have an app that works almost like a real DEX!</p>

<p>Let&#8217;s begin!</p>
